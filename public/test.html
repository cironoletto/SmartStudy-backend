<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Test API</title>
</head>
<body>
  <h1>Test API Register/Login</h1>

  <h2>Register</h2>
  <input type="text" id="regUsername" placeholder="Username">
  <input type="password" id="regPassword" placeholder="Password">
    <input type="fullname" id="regFullName" placeholder="FullName">
  <button onclick="register()">Registrati</button>
  <p id="regResult"></p>

  <h2>Login</h2>
  <input type="text" id="loginUsername" placeholder="Username">
  <input type="password" id="loginPassword" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="loginResult"></p>

  <script>
    const API_URL = "https://smartstudy-backend-production.up.railway.app/api";

    async function register() {
      const username = document.getElementById('regUsername').value;
      const password = document.getElementById('regPassword').value;
      const fullname = document.getElementById('regFullName').value;
      try {
        const res = await fetch(`${API_URL}/auth/register`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password ,fullname})
        });
        const data = await res.json();
        document.getElementById('regResult').innerText = JSON.stringify(data);
      } catch (err) {
        document.getElementById('regResult').innerText = err;
      }
    }

    async function login() {
      const username = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;
      try {
        const res = await fetch(`${API_URL}/auth/login`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password })
        });
        const data = await res.json();
        document.getElementById('loginResult').innerText = JSON.stringify(data);
      } catch (err) {
        document.getElementById('loginResult').innerText = err;
      }
    }
  </script>
</body>
</html>
